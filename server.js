// Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
require('dotenv').config();
const express = require('express');
const connectDB = require('./config/db');
const app = express();
const cors = require('cors'); // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…ÙƒØªØ¨Ø© CORS

// Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
connectDB();

// Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
// ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù†ÙØ° Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© (environment variables) Ø£Ùˆ 3000 ÙƒÙ‚ÙŠÙ…Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
const PORT = process.env.PORT || 3000;

// Body Parser - ÙŠØ³Ù…Ø­ Ù„Ù„Ø®Ø§Ø¯Ù… Ø¨ÙÙ‡Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±Ø³Ù„Ø© ÙÙŠ Ø·Ù„Ø¨Ø§Øª JSON
app.use(express.json());

// ØªÙØ¹ÙŠÙ„ CORS (Cross-Origin Resource Sharing)
// Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± ÙŠØ³Ù…Ø­ Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ù…Ù† Ø£ÙŠ Ù†Ø·Ø§Ù‚ (domain) Ø¨Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø®Ø§Ø¯Ù….
// Ù‡Ø°Ø§ Ø³ÙŠØ­Ù„ Ù…Ø´ÙƒÙ„Ø© "CORS policy" Ø§Ù„ØªÙŠ ÙƒÙ†Øª ØªÙˆØ§Ø¬Ù‡Ù‡Ø§.
// ÙÙŠ Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ØŒ ÙŠÙÙØ¶Ù„ ØªØ­Ø¯ÙŠØ¯ Ù†Ø·Ø§Ù‚Ø§Øª Ù…Ø¹ÙŠÙ†Ø© Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø£Ù…Ù†ÙŠØ©.
app.use(cors());

// Ù…Ø³Ø§Ø± Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø³ÙŠØ·
// Ø¹Ù†Ø¯ Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø¬Ø°Ø±ØŒ Ø³ÙŠØ¹ÙŠØ¯ Ø§Ù„Ø®Ø§Ø¯Ù… Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø©.
app.get('/', (req, res) => {
  res.send('ðŸš€ ICSHD Geniuses API is running');
});

// Ù…Ø³Ø§Ø±Ø§Øª API (Ù‡Ù†Ø§ ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ØªÙŠ ØªØ­Ø¯Ø¯Ù‡Ø§)
// ÙŠØªÙ… Ø¥Ù„ØºØ§Ø¡ ØªØ¹Ù„ÙŠÙ‚ Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø³Ø·Ø± Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø§Ø±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©
// app.use('/api/v1/auth', require('./routes/api/auth'));
// app.use('/api/v1/users', require('./routes/api/users'));
// app.use('/api/v1/posts', require('./routes/api/posts'));


// ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±
// ÙŠØ¨Ø¯Ø£ Ø§Ù„Ø®Ø§Ø¯Ù… Ø¨Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ÙØ° Ø§Ù„Ù…Ø­Ø¯Ø¯.
app.listen(PORT, () => {
  console.log(`âœ… Ø§Ù„Ø®Ø§Ø¯Ù… ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ http://localhost:${PORT}`);
});
